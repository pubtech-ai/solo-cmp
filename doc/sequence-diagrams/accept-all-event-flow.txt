@startuml
AcceptAllEvent -> EventDispatcher: Dispatch
EventDispatcher -> ConsentsGeneratorSubscriber : onAcceptAll(event)
ConsentsGeneratorSubscriber -> ConsentsGeneratorService : generateAndPersistConsentWithAllEnabled(SoloCmpDataBundle)
ConsentsGeneratorService -> TCStringService : buildTCStringAllEnabled(tcModel)
ConsentsGeneratorService -> ACStringService : buildACStringAllEnabled(acModel)
ConsentsGeneratorService -> EventDispatcher : dispatch(ConsentReadyEvent)
EventDispatcher -> CmpCallbackSubscriber : onConsentReady(event)
CmpCallbackSubscriber -> CmpConfigurationProvider : onConsentAdsCallBack(event)
EventDispatcher -> CmpApiSubscriber : onConsentReady(event)
CmpApiSubscriber -> CmpApiProvider : cmpApi.update(tcString, false)
ConsentsGeneratorService -> EventDispatcher : dispatch(ConsentPersistEvent)
EventDispatcher -> ConsentsPersistSubscriber : onConsentPersist(event)
ConsentsPersistSubscriber -> TCStringService : persistTCString(tcString)
ConsentsPersistSubscriber -> ACStringService : persistACString(acString)
@enduml
